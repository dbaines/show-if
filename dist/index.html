<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <title>ShowIf tests</title>
    <link rel="stylesheet" href="./demo.css" />
  </head>
  <body>

    <div class="container">
      <h1>ShowIf.js</h1>

      <div class="content">
        <p><code>show-if</code> is used to show or hide elements based on form selections by marking up your forms with simple <code>data-attributes</code>.</p>
      </div>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="basic" />
          <label for="basic">Tick to show element.</label>
        </div>
        <div class="control-group" data-show-if="basic">
          This is some hidden content that appears when the checkbox is clicked.
        </div>
      </div>
    
    </div>

    <hr />

    <div class="container">
      <h2>Show Types</h2>

      <h3>Checkbox</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>Which topic are you interested in?</div>
            <div class="controls">
              <div>
                <input type="checkbox" id="example-2-a" />
                <label for="example-2-a">Comedy<label>
              </div>
              <div>
                <input type="checkbox" id="example-2-b" />
                <label for="example-2-b">Drama<label>
              </div>
              <div>
                <input type="checkbox" id="example-2-c" />
                <label for="example-2-c">Other<label>
              </div>
              <div data-show-if="example-2-c">
                <label for="example-2-hidden">Please specify</label>
                <input type="text" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Radios</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>What do you want to show?</div>
            <div class="controls">
              <div>
                <input name="radios" type="radio" id="radios-a" />
                <label for="radios-a">Nothing<label>
              </div>
              <div>
                <input name="radios" type="radio" id="radios-b" />
                <label for="radios-b">Not anything<label>
              </div>
              <div>
                <input name="radios" type="radio" id="radios-c" />
                <label for="radios-c">A hidden field<label>
              </div>
              <div data-show-if="radios-c">
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Select</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>What do you want to show?</div>
            <div class="controls">
              <select id="select" id="select">
                <option value="">Nothing</option>
                <option value="">Not anything</option>
                <option value="hidden">A hidden field</option>
              </select>
              <div data-show-if="select" data-show-option="hidden">
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Text</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <label class="control-label" for="input">Type 'showme'</label>
            <div class="controls">
              <input type="text" id="input" />
            </div>
          </div>
          <div class="control-group" data-show-if="input" data-show-input="showme">
            <div class="controls">
              <input type="text" placeholder="Oh hello" />
            </div>
          </div>
        </div>
      </div>

    </div>

    <hr />

    <div class="container">
      <h2>Inverting matches</h2>
      <p>Sometimes you want the opposite behaviour, to show the field by default then hide it if a requirement is met.</p>
      <p>This can be accomplished by adding the <code>data-show-invert</code> attribute to your element.</p>

      <h3>Checkbox</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>Which topic are you interested in?</div>
            <div class="controls">
              <div>
                <input type="checkbox" id="inverse-checkbox-a" />
                <label for="inverse-checkbox-a">Comedy<label>
              </div>
              <div>
                <input type="checkbox" id="inverse-checkbox-b" />
                <label for="inverse-checkbox-b">Drama<label>
              </div>
              <div>
                <input type="checkbox" id="inverse-checkbox-c" />
                <label for="inverse-checkbox-c">Other<label>
              </div>
              <div data-show-if="inverse-checkbox-c" data-show-inverse>
                <label for="example-2-hidden">Please specify</label>
                <input type="text" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Radios</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>What do you want to show?</div>
            <div class="controls">
              <div>
                <input name="radios" type="radio" id="inverse-radios-a" />
                <label for="inverse-radios-a">Nothing<label>
              </div>
              <div>
                <input name="radios" type="radio" id="inverse-radios-b" />
                <label for="inverse-radios-b">Not anything<label>
              </div>
              <div>
                <input name="radios" type="radio" id="inverse-radios-c" />
                <label for="inverse-radios-c">A hidden field<label>
              </div>
              <div data-show-if="inverse-radios-c" data-show-inverse>
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Select</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>What do you want to show?</div>
            <div class="controls">
              <select id="inverse-select">
                <option value="">Nothing</option>
                <option value="">Not anything</option>
                <option value="hidden">A hidden field</option>
              </select>
              <div data-show-if="inverse-select" data-show-option="hidden" data-show-inverse>
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Text</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <label class="control-label" for="inverse-input">Type 'showme'</label>
            <div class="controls">
              <input type="text" id="inverse-input" />
            </div>
          </div>
          <div class="control-group" data-show-if="inverse-input" data-show-input="showme" data-show-inverse>
            <div class="controls">
              <input type="text" placeholder="Oh hello" />
            </div>
          </div>
        </div>
      </div>

    </div>

    <hr />

    <div class="container">

      <h2>Multiple matches (AND)</h2>

      <h3>Multiple checkboxes</h3>

      <p>Simply seperate your IDs with a <code>_&_</code>, eg: <code>multi-and-raph_&_multi-and-don</code>.</p>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>Select Donatello and Raphael</div>
            <div class="controls">
              <div>
                <input type="checkbox" id="multi-and-leo" />
                <label for="multi-and-leo">Leonardo<label>
              </div>
              <div>
                <input type="checkbox" id="multi-and-don" />
                <label for="multi-and-don">Donatello<label>
              </div>
              <div>
                <input type="checkbox" id="multi-and-raph" />
                <label for="multi-and-raph">Raphael<label>
              </div>
              <div>
                <input type="checkbox" id="multi-and-mike" />
                <label for="multi-and-mike">Michaelangelo<label>
              </div>
              <div data-show-if="multi-and-raph_&_multi-and-don">
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <hr />

    <div class="container">

      <h2>Multiple matches (OR)</h2>

      <h3>Multiple checkboxes</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <div>Select Donatello or Raphael</div>
            <div class="controls">
              <div>
                <input type="checkbox" id="multi-or-leo" />
                <label for="multi-or-leo">Leonardo<label>
              </div>
              <div>
                <input type="checkbox" id="multi-or-don" />
                <label for="multi-or-don">Donatello<label>
              </div>
              <div>
                <input type="checkbox" id="multi-or-raph" />
                <label for="multi-or-raph">Raphael<label>
              </div>
              <div>
                <input type="checkbox" id="multi-or-mike" />
                <label for="multi-or-mike">Michaelangelo<label>
              </div>
              <div data-show-if="multi-or-raph_&_multi-or-don" data-show-type="any">
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <h3>Multiple select</h3>

      <div class="spacing">
        <div class="inputs">
          <div class="control-group">
            <label class="control-label">Select "Yes"</label>
            <div class="controls">
              <select id="multi-select">

              </select>
              <div data-show-if="multi-or-raph_&_multi-or-don" data-show-type="any">
                <input type="text" placeholder="Oh hello" />
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <hr />

    <div class="container">
      <h2>String match types</h2>
      <h3>Fuzzy match</h3>
      <p>Match if the required string is anywhere in the input value by adding <code>data-show-type='any'</code>.</p>
      <h3>Type anything</h3>
      <p>Match if the field has any value at all with <code>data-show-type='*'</code>.</p>
    </div>

    <hr />

    <div class="container">

      <h2>Requiredness</h2>

      <h3>Requiredness of hidden fields</h3>

      <p>When hiding a required field, the <code>required</code> attribute will be removed and stored in another <code>data</code> attribute.</p>
      <p>When showing a required field the <code>required</code> state will be re-applied.</p>
      <p>This means that any hidden fields that are usually required will be omitted from requiredness.</p>

      <h3>Dynamic Requirdness</h3>

      <p>Sometimes fields might determine the requiredness of another field, rather than just showing or hiding the field.</p>

      <p>This can be accomplished by using <code>data-required-if</code> <strong>instead of</strong> <code>data-show-if</code>.</p>

      <p>For demonstration purposes, required fields have an outline.</p>

      <p>You can add the attribute directly to the input:</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="required-basic" />
          <label for="required-basic">Tick to make field required.</label>
        </div>
        <div class="control-group">
          <div class="controls">
            <input type="text" placeholder="Oh hello" data-required-if="required-basic" />
          </div>
        </div>
      </div>

      <p>Or if you have a group of inputs that change requiredness, the attribute can be added to a wrapper element:</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="required-wrapper" />
          <label for="required-wrapper">Tick to make fields required.</label>
        </div>
        <div class="control-group" data-required-if="required-wrapper">
          <div class="controls inputs">
            <div><input type="text" placeholder="Oh hello" /></div>
            <div><input type="text" placeholder="Oh hello" /></div>
            <div><input type="text" placeholder="Oh hello" /></div>
            <div><input type="text" placeholder="Oh hello" /></div>
            <div><input type="text" placeholder="Oh hello" /></div>
          </div>
        </div>
      </div>

      <p>Forms that use required markers can be automatically hidden and shown based on this same dynamic requiredness.</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="required-marker" />
          <label for="required-marker">Tick to make field required.</label>
        </div>
        <div class="control-group">
          <label for="required-marker-input"><abbr title="required">*</abbr>Dynamic required marker</label>
          <div class="controls">
            <input type="text" placeholder="Oh hello" data-required-if="required-marker" />
          </div>
        </div>
      </div>

    </div>

    <hr />

    <div class="container">
      <h2>Focus</h2>

      <p>Focus on the first input inside the hidden element with <code>data-show-focus</code>:</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="focus-basic" />
          <label for="focus-basic">Tick to show element.</label>
        </div>
        <div class="control-group" data-show-if="focus-basic" data-show-focus>
          <div class="controls">
            <input type="text" placeholder="Oh hello" />
          </div>
        </div>
      </div>

      <p>Alternatively, you can choose the selector for the focus functionality by passing a value in to the <code>data-show-focus</code> attribute:</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="focus-custom" />
          <label for="focus-custom">Tick to show element.</label>
        </div>
        <div class="control-group" data-show-if="focus-custom" data-show-focus="[data-show-focus-target]">
          <div class="controls">
            <input type="text" placeholder="Skipped!" />
            <input type="text" placeholder="Focused!" data-show-focus-target />
          </div>
        </div>
      </div>

      <p><strong>UX Warning:</strong> It's important to only use this where it makes sense. If you have a control at the top of your form that shows a group of fields much further down the page, don't focus on those fields because it leads to the user being jumped down the page and losing the context of what they are doing.</p>
    </div>

    <hr />

    <div class="container">

      <h2>Data destruction</h2>

      <p>A common problem with dynamic forms like these is that hidden fields probably shouldn't send their data to the form endpoint.</p>
      <p>There are two out-of-the-box solutions for this problem.</p>
      
      <h3>Empty values</h3>
      <p>All fields that are hidden can have all their values removed with <code>data-show-destroy</code>.</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="destroy-empty" />
          <label for="destroy-empty">Tick to show element.</label>
        </div>
        <div class="control-group" data-show-if="destroy-empty" data-show-destroy>
          <div class="controls">
            <input type="text" placeholder="Oh hello" />
          </div>
        </div>
      </div>

      <h3>Disabling fields</h3>
      <p>A less destructive option is to disable hidden fields instead. This can be done with <code>data-show-disable</code>.</p>

      <div class="inputs">
        <div class="control-group">
          <input type="checkbox" id="destroy-disable" />
          <label for="destroy-disable">Tick to show element.</label>
        </div>
        <div class="control-group" data-show-if="destroy-disable" data-show-disable>
          <div class="controls">
            <input type="text" placeholder="Oh hello" />
          </div>
        </div>
      </div>

    </div>

    <hr />

    <div class="container">
      <h2>Configuration</h2>

      <p>All default configuration can be customised on your page by exposing a window variable <code>window.showIfSettings</code>:</p>

      <pre>window.showIfSettings = {
  showIf: 'data-show',
  helpers: false,
}</pre>
    </div>

    <hr />

    <div class="container">
      <h2>Helpers</h2>

      <p>You can expose helpers to a window variable, <code>showIf</code> by settings <code>helpers: true</code> in <a href="#config">your configuration</a>.</p>

      <p>This allows you to essentially roll your own logic using the decern, toggle, show and hide functions that this library uses.</p>

      <pre>var myCheckbox = document.querySelector("#my-input");
myCheckbox.addEventListener("change", animateContent);
var animateContent = function(){
  if(showIf.decernCheckbox(myCheckbox)) {
    animateIn();
  } else {
    animateOut();
  }
}</pre>
    </div>

    <hr />

    <div class="container">
      <h2>ES6 Modules</h2>
    </div>

    <hr />

    <div class="container">
      <h2>JQuery support</h2>
      <p>Out of the box we can detect for jQuery and if it's present we can change the show/hide functions to slideDown/slideUp instead for a nicer out-of-the-box experience.</p>
      <p><button class="button" onclick="jQueryify()">Click here</button> to load in jQuery. Then go back over the examples above to see the slide variation.</p>
    </div>

    <script src="./../src/show-if.js"></script>
    <script>
      // jquerify.js
      // https://github.com/bgrins/devtools-snippets
      window.jQueryify = function(){
        if ( !window.jQuery ) {
          var s = document.createElement('script');
          s.setAttribute('src', '//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js');
          s.addEventListener('load', function(){
            alert("jQuery loaded.");
          });
          document.body.appendChild(s);
        }
      }
    </script>
  </body>
</html>
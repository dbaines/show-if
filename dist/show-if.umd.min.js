/* ShowIf.js */
(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b():'function'==typeof define&&define.amd?define(b):b()})(this,function(){'use strict';function a(a,b){return a.hasAttribute(b)&&a.getAttribute(b)}var b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},c={showIf:'data-show-if',requiredIf:'data-required-if',inputTypes:'input, select, textarea',showIfInput:'data-show-input',showIfSelectOption:'data-show-option',showIfInputValue:'data-show-input',showType:'data-show-type',inverse:'data-show-inverse',focusIn:'data-show-focus',disable:'data-show-disable',destroy:'data-show-destroy',requiredStorage:'data-show-required',requiredMarker:'abbr[title=\'required\']',requiredMarkerDisplayStorage:'data-required-if-display-type',controlSeperator:'_&&_',slideSpeed:200,helpers:!0},d=function(){var a=b({},c);return window.showIfSettings&&(a=b({},c,window.showIfSettings)),a}(),e=function(a){return a.hasAttribute(d.requiredIf)},f=function(a){return-1<d.inputTypes.indexOf(a.nodeName.toLowerCase())},g=function(b){var c=a(b,'type');return!!c&&('checkbox'===c||'radio'===c)},h=function(a){return a.hasAttribute(d.focusIn)},i=function(b){var c=a(b,d.focusIn)||d.inputTypes,e=b.querySelectorAll(c),f=!0,g=!1,h=void 0;try{for(var i,j,k=e[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j=i.value,0<j.offsetWidth&&0<j.offsetHeight&&j.focus()}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}},j=function(a){return a.hasAttribute(d.disable)},k=function(a){if(a.hasAttribute(d.disable)){var b=a.querySelectorAll(d.inputTypes),c=!0,e=!1,f=void 0;try{for(var g,h,i=b[Symbol.iterator]();!(c=(g=i.next()).done);c=!0)h=g.value,h.disabled=!0}catch(a){e=!0,f=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw f}}}},l=function(a){if(a.hasAttribute(d.disable)){var b=a.querySelectorAll(d.inputTypes),c=!0,e=!1,f=void 0;try{for(var g,h,i=b[Symbol.iterator]();!(c=(g=i.next()).done);c=!0)h=g.value,h.disabled=!1}catch(a){e=!0,f=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw f}}}},m=function(a){return a.hasAttribute(d.destroy)},n=function(a){if(a.hasAttribute(d.destroy)){var b=a.querySelectorAll(d.inputTypes),c=!0,e=!1,f=void 0;try{for(var h,i,j=b[Symbol.iterator]();!(c=(h=j.next()).done);c=!0)i=h.value,g(i)?i.checked=!1:i.value=''}catch(a){e=!0,f=a}finally{try{!c&&j.return&&j.return()}finally{if(e)throw f}}}},o=function(b){var c='';return['showIf','requiredIf'].filter(function(e){var f=d[e],g=a(b,f);if(g)return void(c=g)}),c},p=function(a){return d.getControlId?d.getControlId(a):document.getElementById(a)},q=function(a){var b=[],c=o(a);if(c){var e=[c];-1<c.indexOf(d.controlSeperator)&&(e=c.split(d.controlSeperator)),e.map(function(a){b.push(p(a))})}else console.warn('[SHOWJS] No controls found for element - does it contain a show target attribute such as `data-show-if`?');return b},r=function(a,b){return-1<b.indexOf(d.controlSeperator)?(b=b.split(d.controlSeperator),-1<b.indexOf(a)):a===b},s=function(b,c){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],f=c.length,h=!1,i=0,j=-1<(e+'').indexOf(d.controlSeperator);return j&&(e=e.split(d.controlSeperator)),c.map(function(a,b){var c=e,d=g(a);j&&(c=e[b]||!0),d&&(a.checked===c?i++:a.value===c&&i++)}),h='any'===a(b,d.showType)?0<i:i===f,h},t=function(b,c){var e=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],f=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],g=a(b,d.showIfSelectOption);if(g){var h=r(c.value,g);if(f)f(b,h,e);else return h}else console.warn('[SHOWJS] Attempting to determine select logic with no `data-show-option` attribute present.')},u=function(a,b){var c=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],d=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],e=!0===b.checked;return d?void d(a,e,c):e},v=function(a,b){var c=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],d=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],e=s(a,b);return d?void d(a,e,c):e};(function(){var b={version:'0.1.0',settings:d,_targetIsRequiredIf:e,_targetShouldDisable:j,_targetShouldDestroy:m,_targetShouldFocusIn:h,_isInput:f,_isInputCheckable:g,_disableFieldsIn:k,_enableFieldsIn:l,_destroyDataIn:n,_focusInTarget:i,_getTargetControlsFor:q,_getShowRuleForElement:o,_getControlId:p,_checkValue:r,_decernMultipleFields:s,decernSelect:t,decernRadio:u,decernMultipleRadio:v};return b._exposeHelpers=function(){b.settings.helpers&&(window.showIf=b)},b._beforeShow=function(a){b.settings.beforeShow&&b.settings.beforeShow(a)},b._afterShow=function(a){b.settings.afterShow&&b.settings.afterShow(a)},b._beforeHide=function(a){b.settings.beforeHide&&b.settings.beforeHide(a)},b._afterHide=function(a){b.settings.afterHide&&b.settings.afterHide(a)},b._bindCheckbox=function(c,d,e){var f=a(c,'name'),g=[];f&&(g=document.querySelectorAll('[name=\''+f+'\']'));var h=function(){var a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];1<d.length?b.decernMultipleRadio(e,d,a,b.toggle):b.decernRadio(e,c,a,b.toggle)};if(g.length){var i=!0,j=!1,k=void 0;try{for(var l,m,n=g[Symbol.iterator]();!(i=(l=n.next()).done);i=!0)m=l.value,m.addEventListener('change',h)}catch(a){j=!0,k=a}finally{try{!i&&n.return&&n.return()}finally{if(j)throw k}}}else c.addEventListener('change',h);h(!1,!0)},b._bindInput=function(a,c,d){var e=function(){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];b.decernInput(d,a,c,b.toggle)};a.removeEventListener('keyup',e),a.addEventListener('keyup',e),e(!1,!0)},b._bindSelect=function(a,c,d){var e=function(){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];1<c.length?b.decernMultipleSelect(d,c,e,b.toggle):b.decernSelect(d,a,e,b.toggle)};a.addEventListener('change',e),e(!1,!0)},b.decernMultipleSelect=function(c,d){var e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=arguments[3],g=a(c,b.settings.showIfSelectOption);if(g){var h=b._decernMultipleFields(c,d,g);if(f)f(c,h,e);else return h}else console.warn('[SHOWJS] Attempting to determine select logic with no `data-show-option` attribute present.')},b.decernInput=function(c,d){var e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],g=!1,h=a(c,b.settings.showIfInputValue).toLowerCase(),i=d.value.toLowerCase(),j=a(c,b.settings.showType);return'*'===j||h||console.warn('[SHOWJS] Missing value to match on input field'),g='*'===j?0<i.length:'any'===j?-1<i.indexOf(h):b._checkValue(i,h),f?void f(c,g,e):g},b.setRequired=function(c){var d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(b._isInput(c))c.required=d;else{var e=c.querySelectorAll(b.settings.inputTypes),f=c.querySelectorAll(b.settings.requiredMarker),g=!0,h=!1,i=void 0;try{for(var j,k,l=e[Symbol.iterator]();!(g=(j=l.next()).done);g=!0)k=j.value,k.required=d}catch(a){h=!0,i=a}finally{try{!g&&l.return&&l.return()}finally{if(h)throw i}}var m=!0,n=!1,o=void 0;try{for(var p,q,r=f[Symbol.iterator]();!(m=(p=r.next()).done);m=!0){q=p.value,d||q.setAttribute(b.settings.requiredMarkerDisplayStorage,q.style.display);var s=d?a(q,b.settings.requiredMarkerDisplayStorage)||'inline':'none';q.style.display=s}}catch(a){n=!0,o=a}finally{try{!m&&r.return&&r.return()}finally{if(n)throw o}}}},b.show=function(a){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];b._beforeShow(a),b._targetIsRequiredIf(a)?b.setRequired(a,!0):c?a.style.display='block':!a.hasAttribute('data-showing')&&(a.setAttribute('data-showing','true'),a.removeAttribute('data-hiding'),b.showFunction(a,c)),b._targetShouldFocusIn(a)&&b._focusInTarget(a),b._targetShouldDisable(a)&&b._enableFieldsIn(a),b._afterShow(a)},b.hide=function(a){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];b._beforeHide(a,c),b._targetIsRequiredIf(a)?b.setRequired(a,!1):c?a.style.display='none':!a.hasAttribute('data-hiding')&&(a.setAttribute('data-hiding','true'),a.removeAttribute('data-showing'),b.hideFunction(a,c)),b._targetShouldDisable(a)&&b._disableFieldsIn(a),b._targetShouldDestroy(a)&&b._destroyDataIn(a),b._afterHide(a,c)},b.showFunction=function(a){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(b.settings.showFunction)b.settings.showFunction(a,c);else if('undefined'!=typeof jQuery){var d=c?0:b.settings.slideSepeed;jQuery(a).stop().slideDown(d,function(){a.hasAttribute('data-showing')&&a.removeAttribute('data-showing')})}else a.style.display='block'},b.hideFunction=function(a){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(b.settings.hideFunction)b.settings.hideFunction(a,c);else if('undefined'!=typeof jQuery){var d=c?0:b.settings.slideSepeed;jQuery(a).stop().slideUp(d,function(){a.hasAttribute('data-hiding')&&a.removeAttribute('data-hiding')})}else a.style.display='none'},b.toggle=function(a){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],d=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];a.hasAttribute(b.settings.inverse)&&(c=!c),c?b.show(a,d):b.hide(a,d)},b.bindListeners=function(){var c=!0,d=!1,e=void 0;try{for(var f,g=b.$targets[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=b._getTargetControlsFor(h),j=!0,k=!1,l=void 0;try{for(var m,n=i[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value,p=a(o,'type'),q=a(h,b.settings.showIfInput),r=a(h,b.settings.showIfSelectOption);'radio'===p||'checkbox'===p?b._bindCheckbox(o,i,h):q?b._bindInput(o,i,h):r&&b._bindSelect(o,i,h)}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}},b.init=function(){b._exposeHelpers(),b.$targets=document.querySelectorAll('['+b.settings.showIf+'],['+b.settings.requiredIf+']'),b.bindListeners()},'undefined'!=typeof window&&b.init(),b})()});

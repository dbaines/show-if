/* ShowIf.js */
(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b():'function'==typeof define&&define.amd?define(b):b()})(this,function(){'use strict';var a=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},b={showIf:'data-show-if',requiredIf:'data-required-if',inputTypes:'input, select, textarea',showIfInput:'data-show-input',showIfSelectOption:'data-show-option',showIfInputValue:'data-show-input',showType:'data-show-type',inverse:'data-show-inverse',focusIn:'data-show-focus',disable:'data-show-disable',destroy:'data-show-destroy',requiredStorage:'data-show-required',requiredMarker:'abbr[title=\'required\']',requiredMarkerDisplayStorage:'data-required-if-display-type',controlSeperator:'_&&_',slideSpeed:200,helpers:!0},c=function(){var c=a({},b);return window.showIfSettings&&(c=a({},b,window.showIfSettings)),c}();(function(){var a={version:'0.1.0',settings:c},b=function(a,b){return a.hasAttribute(b)&&a.getAttribute(b)};return a._exposeHelpers=function(){a.settings.helpers&&(window.showIf=a)},a._beforeShow=function(b){a.settings.beforeShow&&a.settings.beforeShow(b)},a._afterShow=function(b){a.settings.afterShow&&a.settings.afterShow(b)},a._beforeHide=function(b){a.settings.beforeHide&&a.settings.beforeHide(b)},a._afterHide=function(b){a.settings.afterHide&&a.settings.afterHide(b)},a._getShowRuleForElement=function(c){var d='';return['showIf','requiredIf'].filter(function(e){var f=a.settings[e],g=b(c,f);if(g)return void(d=g)}),d},a._isInput=function(b){return-1<a.settings.inputTypes.indexOf(b.nodeName.toLowerCase())},a._isInputCheckable=function(a){var c=b(a,'type');return!!c&&('checkbox'===c||'radio'===c)},a._targetIsRequiredIf=function(b){return b.hasAttribute(a.settings.requiredIf)},a._targetShouldDisable=function(b){return b.hasAttribute(a.settings.disable)},a._targetShouldDestroy=function(b){return b.hasAttribute(a.settings.destroy)},a._targetShouldFocusIn=function(b){return b.hasAttribute(a.settings.focusIn)},a._disableFieldsIn=function(b){if(b.hasAttribute(a.settings.disable)){var c=b.querySelectorAll(a.settings.inputTypes),d=!0,e=!1,f=void 0;try{for(var g,h,i=c[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h=g.value,h.disabled=!0}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}}},a._enableFieldsIn=function(b){if(b.hasAttribute(a.settings.disable)){var c=b.querySelectorAll(a.settings.inputTypes),d=!0,e=!1,f=void 0;try{for(var g,h,i=c[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h=g.value,h.disabled=!1}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}}},a._destroyDataIn=function(b){if(b.hasAttribute(a.settings.destroy)){var c=b.querySelectorAll(a.settings.inputTypes),d=!0,e=!1,f=void 0;try{for(var g,h,i=c[Symbol.iterator]();!(d=(g=i.next()).done);d=!0)h=g.value,a._isInputCheckable(h)?h.checked=!1:h.value=''}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}}},a._getControlId=function(b){return a.settings.getControlId?a.settings.getControlId(b):document.getElementById(b)},a._getTargetControlsFor=function(b){var c=[],d=a._getShowRuleForElement(b);if(d){var e=[d];-1<d.indexOf(a.settings.controlSeperator)&&(e=d.split(a.settings.controlSeperator)),e.map(function(b){c.push(a._getControlId(b))})}else console.warn('[SHOWJS] No controls found for element - does it contain a show target attribute such as `data-show-if`?');return c},a._bindCheckbox=function(c,d,e){var f=b(c,'name'),g=[];f&&(g=document.querySelectorAll('[name=\''+f+'\']'));var h=function(){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];1<d.length?a.decernMultipleRadio(e,d,b,a.toggle):a.decernRadio(e,c,b,a.toggle)};if(g.length){var i=!0,j=!1,k=void 0;try{for(var l,m,n=g[Symbol.iterator]();!(i=(l=n.next()).done);i=!0)m=l.value,m.addEventListener('change',h)}catch(a){j=!0,k=a}finally{try{!i&&n.return&&n.return()}finally{if(j)throw k}}}else c.addEventListener('change',h);h(!1,!0)},a._bindInput=function(b,c,d){var e=function(){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];a.decernInput(d,b,c,a.toggle)};b.removeEventListener('keyup',e),b.addEventListener('keyup',e),e(!1,!0)},a._bindSelect=function(b,c,d){var e=function(){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];1<c.length?a.decernMultipleSelect(d,c,e,a.toggle):a.decernSelect(d,b,e,a.toggle)};b.addEventListener('change',e),e(!1,!0)},a._checkValue=function(b,c){return-1<c.indexOf(a.settings.controlSeperator)?(c=c.split(a.settings.controlSeperator),-1<c.indexOf(b)):b===c},a._decernMultipleFields=function(c,d){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],f=d.length,g=!1,h=0,i=-1<(e+'').indexOf(a.settings.controlSeperator);return i&&(e=e.split(a.settings.controlSeperator)),d.map(function(b,c){var d=e,f=a._isInputCheckable(b);i&&(d=e[c]||!0),f&&(b.checked===d?h++:b.value===d&&h++)}),g='any'===b(c,a.settings.showType)?0<h:h===f,g},a.decernSelect=function(c,d){var e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],g=b(c,a.settings.showIfSelectOption);if(g){var h=a._checkValue(d.value,g);if(a.toggle(c,h,e),f)f(c,h,e);else return h}else console.warn('[SHOWJS] Attempting to determine select logic with no `data-show-option` attribute present.')},a.decernMultipleSelect=function(c,d){var e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=arguments[3],g=b(c,a.settings.showIfSelectOption);if(g){var h=a._decernMultipleFields(c,d,g);if(f)f(c,h,e);else return h}else console.warn('[SHOWJS] Attempting to determine select logic with no `data-show-option` attribute present.')},a.decernRadio=function(a,b){var c=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],d=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],e=!0===b.checked;return d?void d(a,e,c):e},a.decernMultipleRadio=function(b,c){var d=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],e=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],f=a._decernMultipleFields(b,c);return e?void e(b,f,d):f},a.decernInput=function(c,d){var e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],g=!1,h=b(c,a.settings.showIfInputValue).toLowerCase(),i=d.value.toLowerCase(),j=b(c,a.settings.showType);return'*'===j||h||console.warn('[SHOWJS] Missing value to match on input field'),g='*'===j?0<i.length:'any'===j?-1<i.indexOf(h):a._checkValue(i,h),f?void f(c,g,e):g},a.setRequired=function(c){var d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(a._isInput(c))c.required=d;else{var e=c.querySelectorAll(a.settings.inputTypes),f=c.querySelectorAll(a.settings.requiredMarker),g=!0,h=!1,i=void 0;try{for(var j,k,l=e[Symbol.iterator]();!(g=(j=l.next()).done);g=!0)k=j.value,k.required=d}catch(a){h=!0,i=a}finally{try{!g&&l.return&&l.return()}finally{if(h)throw i}}var m=!0,n=!1,o=void 0;try{for(var p,q,r=f[Symbol.iterator]();!(m=(p=r.next()).done);m=!0){q=p.value,d||q.setAttribute(a.settings.requiredMarkerDisplayStorage,q.style.display);var s=d?b(q,a.settings.requiredMarkerDisplayStorage)||'inline':'none';q.style.display=s}}catch(a){n=!0,o=a}finally{try{!m&&r.return&&r.return()}finally{if(n)throw o}}}},a.show=function(c){var d=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(a._beforeShow(c),a._targetIsRequiredIf(c)?a.setRequired(c,!0):d?c.style.display='block':!c.hasAttribute('data-showing')&&(c.setAttribute('data-showing','true'),c.removeAttribute('data-hiding'),a.showFunction(c,d)),a._targetShouldFocusIn(c)){var e=b(c,a.settings.focusIn)||a.settings.inputTypes,f=c.querySelectorAll(e),g=!0,h=!1,i=void 0;try{for(var j,k,l=f[Symbol.iterator]();!(g=(j=l.next()).done);g=!0)k=j.value,0<k.offsetWidth&&0<k.offsetHeight&&k.focus()}catch(a){h=!0,i=a}finally{try{!g&&l.return&&l.return()}finally{if(h)throw i}}}a._targetShouldDisable(c)&&a._enableFieldsIn(c),a._afterShow(c)},a.hide=function(b){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];a._beforeHide(b,c),a._targetIsRequiredIf(b)?a.setRequired(b,!1):c?b.style.display='none':!b.hasAttribute('data-hiding')&&(b.setAttribute('data-hiding','true'),b.removeAttribute('data-showing'),a.hideFunction(b,c)),a._targetShouldDisable(b)&&a._disableFieldsIn(b),a._targetShouldDestroy(b)&&a._destroyDataIn(b),a._afterHide(b,c)},a.showFunction=function(b){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(a.settings.showFunction)a.settings.showFunction(b,c);else if('undefined'!=typeof jQuery){var d=c?0:a.settings.slideSepeed;jQuery(b).stop().slideDown(d,function(){b.hasAttribute('data-showing')&&b.removeAttribute('data-showing')})}else b.style.display='block'},a.hideFunction=function(b){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(a.settings.hideFunction)a.settings.hideFunction(b,c);else if('undefined'!=typeof jQuery){var d=c?0:a.settings.slideSepeed;jQuery(b).stop().slideUp(d,function(){b.hasAttribute('data-hiding')&&b.removeAttribute('data-hiding')})}else b.style.display='none'},a.toggle=function(b){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],d=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];b.hasAttribute(a.settings.inverse)&&(c=!c),c?a.show(b,d):a.hide(b,d)},a.bindListeners=function(){var c=!0,d=!1,e=void 0;try{for(var f,g=a.$targets[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=a._getTargetControlsFor(h),j=!0,k=!1,l=void 0;try{for(var m,n=i[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value,p=b(o,'type'),q=b(h,a.settings.showIfInput),r=b(h,a.settings.showIfSelectOption);'radio'===p||'checkbox'===p?a._bindCheckbox(o,i,h):q?a._bindInput(o,i,h):r&&a._bindSelect(o,i,h)}}catch(a){k=!0,l=a}finally{try{!j&&n.return&&n.return()}finally{if(k)throw l}}}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}},a.init=function(){a._exposeHelpers(),a.$targets=document.querySelectorAll('['+a.settings.showIf+'],['+a.settings.requiredIf+']'),a.bindListeners()},'undefined'!=typeof window&&a.init(),a})()});

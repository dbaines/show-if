/* ShowIf.js */
(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b():'function'==typeof define&&define.amd?define(b):b()})(this,function(){'use strict';function a(a,b){return a.hasAttribute(b)&&a.getAttribute(b)}var b=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},c={showIf:'data-show-if',requiredIf:'data-required-if',inputTypes:'input, select, textarea',showIfInput:'data-show-input',showIfSelectOption:'data-show-option',showIfInputValue:'data-show-input',showType:'data-show-type',inverse:'data-show-inverse',focusIn:'data-show-focus',disable:'data-show-disable',destroy:'data-show-destroy',requiredStorage:'data-show-required',requiredMarker:'abbr[title=\'required\']',requiredMarkerDisplayStorage:'data-required-if-display-type',controlSeperator:'_&&_',slideSpeed:200,helpers:!1,eventPrefix:'show-if'},d=function(){var a=b({},c);return window.showIf&&(a=b({},c,window.showIf)),a}(),e=function(b){var c='';return['showIf','requiredIf'].filter(function(e){var f=d[e],g=a(b,f);if(g)return void(c=g)}),c},f=function(a){return d.getControlId?d.getControlId(a):document.getElementById(a)},g=function(a){var b=e(a);return h(b)},h=function(a){var b=[];if(a){var c=[a];-1<a.indexOf(d.controlSeperator)&&(c=a.split(d.controlSeperator)),c.map(function(a){b.push(f(a))})}else console.warn('[SHOWJS] No controls found for element - does it contain a show target attribute such as `data-show-if`?');return b},i=function(a){return-1<d.inputTypes.indexOf(a.nodeName.toLowerCase())},j=function(b){var c=a(b,'type');return!!c&&('checkbox'===c||'radio'===c)},k=function(b,c){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],f=c.length,g=!1,h=0,i=-1<(e+'').indexOf(d.controlSeperator);return i&&(e=e.split(d.controlSeperator)),c.map(function(a,b){var c=e,d=j(a);i&&(c=e[b]||!0),d&&(a.checked===c?h++:a.value===c&&h++)}),g='any'===a(b,d.showType)?0<h:h===f,g},l=function(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],c=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],d=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],e=!0===a.checked;return d&&b?void d(b,e,c):e},m=function(a,b){var c=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],d=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],e=k(b,a);return d?void d(b,e,c):e},n=function(a,b){var c=d.eventPrefix+':'+a;if('undefined'!=typeof jQuery)$(b).trigger(c,[b]);else{var e=new CustomEvent(c,{detail:{showTarget:b}});b.dispatchEvent(e)}},o=function(a){n('before-show',a),d.beforeShow&&d.beforeShow(a)},p=function(a){n('after-show',a),d.afterShow&&d.afterShow(a)},q=function(a){n('before-hide',a),d.beforeHide&&d.beforeHide(a)},r=function(a){n('after-hide',a),d.afterHide&&d.afterHide(a)},s=function(a){return a.hasAttribute(d.requiredIf)},t=function(b){var c=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(i(b))b.required=c;else{var e=b.querySelectorAll(d.inputTypes),f=b.querySelectorAll(d.requiredMarker),g=!0,h=!1,j=void 0;try{for(var k,l,m=e[Symbol.iterator]();!(g=(k=m.next()).done);g=!0)l=k.value,l.required=c}catch(a){h=!0,j=a}finally{try{!g&&m.return&&m.return()}finally{if(h)throw j}}var n=!0,o=!1,p=void 0;try{for(var q,r,s=f[Symbol.iterator]();!(n=(q=s.next()).done);n=!0){r=q.value,c||r.setAttribute(d.requiredMarkerDisplayStorage,r.style.display);var t=c?a(r,d.requiredMarkerDisplayStorage)||'inline':'none';r.style.display=t}}catch(a){o=!0,p=a}finally{try{!n&&s.return&&s.return()}finally{if(o)throw p}}}},u=function(a){return a.hasAttribute(d.disable)},v=function(a){if(a.hasAttribute(d.disable)){var b=a.querySelectorAll(d.inputTypes),c=!0,e=!1,f=void 0;try{for(var g,h,i=b[Symbol.iterator]();!(c=(g=i.next()).done);c=!0)h=g.value,h.disabled=!0}catch(a){e=!0,f=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw f}}}},w=function(a){if(a.hasAttribute(d.disable)){var b=a.querySelectorAll(d.inputTypes),c=!0,e=!1,f=void 0;try{for(var g,h,i=b[Symbol.iterator]();!(c=(g=i.next()).done);c=!0)h=g.value,h.disabled=!1}catch(a){e=!0,f=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw f}}}},x=function(a){return a.hasAttribute(d.focusIn)},y=function(b){var c=a(b,d.focusIn)||d.inputTypes,e=b.querySelectorAll(c),f=!0,g=!1,h=void 0;try{for(var i,j,k=e[Symbol.iterator]();!(f=(i=k.next()).done);f=!0)j=i.value,0<j.offsetWidth&&0<j.offsetHeight&&j.focus()}catch(a){g=!0,h=a}finally{try{!f&&k.return&&k.return()}finally{if(g)throw h}}},z=function(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(d.showFunction)d.showFunction(a,b);else if('undefined'!=typeof jQuery){var c=b?0:d.slideSepeed;jQuery(a).stop().slideDown(c,function(){a.hasAttribute('data-showing')&&a.removeAttribute('data-showing')})}else a.style.display='block'},A=function(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];o(a),s(a)?t(a,!0):b?a.style.display='block':!a.hasAttribute('data-showing')&&(a.setAttribute('data-showing','true'),a.removeAttribute('data-hiding'),z(a,b)),x(a)&&y(a),u(a)&&w(a),p(a)},B=function(a){return a.hasAttribute(d.destroy)},C=function(a){if(a.hasAttribute(d.destroy)){var b=a.querySelectorAll(d.inputTypes),c=!0,e=!1,f=void 0;try{for(var g,h,i=b[Symbol.iterator]();!(c=(g=i.next()).done);c=!0)h=g.value,j(h)?h.checked=!1:h.value=''}catch(a){e=!0,f=a}finally{try{!c&&i.return&&i.return()}finally{if(e)throw f}}}},D=function(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(d.hideFunction)d.hideFunction(a,b);else if('undefined'!=typeof jQuery){var c=b?0:d.slideSepeed;jQuery(a).stop().slideUp(c,function(){a.hasAttribute('data-hiding')&&a.removeAttribute('data-hiding')})}else a.style.display='none'},E=function(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];q(a,b),s(a)?t(a,!1):b?a.style.display='none':!a.hasAttribute('data-hiding')&&(a.setAttribute('data-hiding','true'),a.removeAttribute('data-showing'),D(a,b)),u(a)&&v(a),B(a)&&C(a),r(a,b)},F=function(a){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],c=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2];a.hasAttribute(d.inverse)&&(b=!b),b?A(a,c):E(a,c)},G=function(b,c,d){var e=a(b,'name'),f=[];e&&(f=document.querySelectorAll('[name=\''+e+'\']'));var g=function(){var a=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];1<c.length?m(c,d,a,F):l(b,d,a,F)};if(f.length){var h=!0,i=!1,j=void 0;try{for(var k,n,o=f[Symbol.iterator]();!(h=(k=o.next()).done);h=!0)n=k.value,n.addEventListener('change',g)}catch(a){i=!0,j=a}finally{try{!h&&o.return&&o.return()}finally{if(i)throw j}}}else b.addEventListener('change',g);g(!1,!0)},H=function(a,b){return-1<b.indexOf(d.controlSeperator)?(b=b.split(d.controlSeperator),-1<b.indexOf(a)):a===b},I=function(b,c){var e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],g=!1,h=a(b,d.showIfInputValue).toLowerCase(),i=c.value.toLowerCase(),j=a(b,d.showType);return'*'===j||h||console.warn('[SHOWJS] Missing value to match on input field'),g='*'===j?0<i.length:'any'===j?-1<i.indexOf(h):H(i,h),f?void f(b,g,e):g},J=function(a,b,c){var d=function(){var b=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];I(c,a,b,F)};a.removeEventListener('keyup',d),a.addEventListener('keyup',d),d(!1,!0)},K=function(b,c){var e=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],f=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],g=a(b,d.showIfSelectOption);if(g){var h=H(c.value,g);if(f)f(b,h,e);else return h}else console.warn('[SHOWJS] Attempting to determine select logic with no `data-show-option` attribute present.')},L=function(b,c){var e=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],f=arguments[3],g=a(b,d.showIfSelectOption);if(g){var h=k(b,c,g);if(f)f(b,h,e);else return h}else console.warn('[SHOWJS] Attempting to determine select logic with no `data-show-option` attribute present.')},M=function(a,b,c){var d=function(){var d=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];1<b.length?L(c,b,d,F):K(c,a,d,F)};a.addEventListener('change',d),d(!1,!0)},N=document.querySelectorAll('['+d.showIf+'],['+d.requiredIf+']'),O=function(){var b=!0,c=!1,e=void 0;try{for(var f,h=N[Symbol.iterator]();!(b=(f=h.next()).done);b=!0){var i=f.value,j=g(i),k=!0,l=!1,m=void 0;try{for(var n,o=j[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value,q=a(p,'type'),r=a(i,d.showIfInput),s=a(i,d.showIfSelectOption);'radio'===q||'checkbox'===q?G(p,j,i):r?J(p,j,i):s&&M(p,j,i)}}catch(a){l=!0,m=a}finally{try{!k&&o.return&&o.return()}finally{if(l)throw m}}}}catch(a){c=!0,e=a}finally{try{!b&&h.return&&h.return()}finally{if(c)throw e}}},P=function(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};c.settings&&c.settings.helpers&&(c=b({},c,{getAttribute:a,isInput:i,isInputCheckable:j,targetIsRequiredIf:s,setRequired:t,targetShouldFocusIn:x,focusInTarget:y,targetShouldDisable:u,disableFieldsIn:v,enableFieldsIn:w,targetShouldDestroy:B,destroyDataIn:C,getShowRuleForTarget:e,getControlId:f,getTargetControlsFor:g,checkValue:H,discernMultipleFields:k,discernSelect:K,discernMultipleSelect:L,discernRadio:l,discernMultipleRadio:m,discernInput:I,toggle:F,show:A,hide:E,showFunction:z,hideFunction:D,beforeShow:o,afterShow:p,beforeHide:q,afterHide:r,bindRadio:G,bindInput:J,bindSelect:M,bindAll:O},window.showIf),window.showIf=c)};(function(){var a={version:'0.1.0',settings:d};return a.init=function(){P(a),O()},'undefined'!=typeof window&&window.addEventListener('DOMContentLoaded',a.init),a})()});
